# Pure P2P Mode Configuration
# Use this template to ensure NO user data is stored on VPS
# Only metadata (manifests, replicas, pointers) are stored; chunk data lives ONLY on peers

# === Storage Service ===
# Default to memory backend (no disk/S3 persistence)
STORAGE_BACKEND=memory
# Alternatively, disable storage service entirely and don't run it

# === Registry Service ===
# Registry stores manifests and metadata but NOT inline chunk data (enforced in code)
REGISTRY_PORT=8788
REGISTRY_HOST=0.0.0.0
REGISTRY_DB_PATH=./registry-data/registry.sqlite
# API key for registry (set strong value in production)
REGISTRY_API_KEYS=registry-test-key

# === Gateway Service ===
# Gateway in pure P2P mode returns 501 and tells clients to use peer resolver
GATEWAY_PORT=8790
GATEWAY_HOST=127.0.0.1
REGISTRY_URL=http://localhost:8788
REGISTRY_API_KEY=registry-test-key

# === Signaling Service ===
SIGNALING_PORT=8787
SIGNALING_SHARED_SECRET=choose-a-strong-secret
# TURN/ICE servers for NAT traversal (optional, improves connectivity)
# SIGNALING_ICE_SERVERS='[{"urls":"stun:stun.l.google.com:19302"}]'

# === Telemetry ===
# Optional: disable local file logging or point to tmpfs/dev/null
# TELEMETRY_LOG_PATH=/dev/null
# TELEMETRY_ENDPOINT=http://your-telemetry-collector

# === Notes ===
# - Chunk data is NEVER written to disk/DB on VPS (enforced in registry routes + store)
# - Storage service runs in memory-only mode (no persistence)
# - Gateway does NOT serve content; returns 501 with peer replica info
# - Resolver/extension fetches chunks ONLY from connected peers via WebRTC
# - If all peers go offline, content becomes unavailable (intended behavior)
